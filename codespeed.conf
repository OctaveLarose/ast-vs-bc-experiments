# -*- mode: yaml -*-
# Config file for ReBench
default_experiment: all
default_data_file: 'benchmark.data'

.are_we_fast_yet:
    ## this is ignored by rebench
    iteration_numbers:
        fast_vm:      &FAST_VM      2000
        slow_vm:      &SLOW_VM      250
        slower_vm:    &SLOWER_VM    85
        very_slow_vm: &VERY_SLOW_VM 15

.all_commits:
    tsom:
        tsom-baseline: &SHA_TSOM_BASELINE "64ffec11a782d729ecfdf9c50c3b07f99e96349f"
        tsom-no-lower-prims: &SHA_TSOM_NO_LOWER_PRIMS "86c4856f1392bdda76162d97d19a2d8116d3631b"
        tsom-no-inline-caching: &SHA_TSOM_NO_INLINE_CACHING "60ae3e508e68e87d358222102c3b2a8c67de11d0"
        tsom-no-inlining-control-structs: &SHA_TSOM_NO_INLINING_CONTROL_STRUCTS "b98d12efa020ebe027c2ba39a16d6d7431146f6d"
        tsom-no-global-caching: &SHA_TSOM_NO_GLOBAL_CACHING "8f6e5fb5e5abc17fd68e28f8dc332fc0b560036c"
        ast-only:
            tsom-no-supernodes: &SHA_TSOM_NO_SUPERNODES "a7a2bc985bc695b116a97dda79b5c92c873507cb"
        bc-only:
            tsom-no-quickening: &SHA_TSOM_NO_QUICKENING "cf0f4bb9b6601a6e8330ad68c3ea40ed4f269f57"
            tsom-no-superinstructions: &SHA_TSOM_NO_SUPERINSTRUCTIONS "1b8cebeaf920072f8583471f517c7a08421a0a9a"

    pysom:
        pysom-baseline: &SHA_PYSOM_BASELINE "c98d42786fc5f769dbe9e508eb7af4b54a33a2c8"
        pysom-no-lower-prims: &SHA_PYSOM_NO_LOWER_PRIMS "b5f7cc0d5d8e39455ed10a50b86e261e7f567902"
        pysom-no-inline-caching: &SHA_PYSOM_NO_INLINE_CACHING "2f87d6c1ac9c3b6895971ed24a6cda18c4240c0b"
        pysom-no-inlining-control-structs: &SHA_PYSOM_NO_INLINING_CONTROL_STRUCTS "fd8870af33af78eac87ddee4a49905cf0fcc3552"
        pysom-no-global-caching: &SHA_PYSOM_NO_GLOBAL_CACHING "6b4e7af2f66439761b4dd641a2121949e72933b7"
        bc-only:
            pysom-no-quickening: &SHA_PYSOM_NO_QUICKENING "1c64ed989f25a0e08c8bc2716a75f642f6348fe5"
            pysom-no-superinstructions: &SHA_PYSOM_NO_SUPERINSTRUCTIONS "f0398a3d971dea12e287bec04f749159170e2ff1"

.tsom-init: &TSOM_HOTSPOT_BUILD
    path: /home/gitlab-runner/.local/TruffleSOM
    executable: som
    build:
        - |
          export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64/
          export PATH=/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:$PATH
          export LANG=en_GB.UTF-8
          git fetch --all && git checkout -f $SHA && git submodule update -f --init --recursive
          ant clean && ant compile

.tsom-init-native-ast: &TSOM_NATIVE_AST_BUILD
    path: /home/gitlab-runner/.local/TruffleSOM
    build:
        - |
          export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64/
          export PATH=/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:$PATH
          export LANG=en_GB.UTF-8
          git fetch --all && git checkout -f $SHA && git submodule update -f --init --recursive
          ant clean && ant compile-som && ant compile native-ast -Dno.jit=true
          rm -f som-native-interp-ast-$OPTIM
          [ ! -z $OPTIM ] && mv som-native-interp-ast som-native-interp-ast-$OPTIM

.tsom-init-native-bc: &TSOM_NATIVE_BC_BUILD
    path: /home/gitlab-runner/.local/TruffleSOM
    build:
        - |
          export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64/
          export PATH=/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:$PATH
          export LANG=en_GB.UTF-8
          git fetch --all && git checkout -f $SHA && git submodule update -f --init --recursive
          ant clean && ant compile-som && ant compile native-bc -Dno.jit=true
          rm -f som-native-interp-bc-$OPTIM
          [ ! -z $OPTIM ] && mv som-native-interp-bc som-native-interp-bc-$OPTIM

.pysom-ast-jit: &PYSOM_AST_JIT_BUILD
    path: /home/gitlab-runner/.local/PySOM
    executable: som-ast-jit
    build:
        - |
          export PATH=/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:$PATH
          git fetch --all && git checkout -f $SHA && git submodule update -f --init --recursive
          SOM_INTERP=AST /home/gitlab-runner/.local/pypy2.7-v7.3.9-src/rpython/bin/rpython -Ojit src/main_rpython.py

.pysom-bc-jit: &PYSOM_BC_JIT_BUILD
    path: /home/gitlab-runner/.local/PySOM
    executable: som-bc-jit
    build:
        - |
          export PATH=/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:$PATH
          git fetch --all && git checkout -f $SHA && git submodule update -f --init --recursive
          SOM_INTERP=BC /home/gitlab-runner/.local/pypy2.7-v7.3.9-src/rpython/bin/rpython -Ojit src/main_rpython.py

.pysom-ast-int: &PYSOM_AST_INT_BUILD
    path: /home/gitlab-runner/.local/PySOM
    executable: som-ast-interp
    build:
        - |
          export PATH=/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:$PATH
          git fetch --all && git checkout -f $SHA && git submodule update -f --init --recursive
          SOM_INTERP=AST /home/gitlab-runner/.local/pypy2.7-v7.3.9-src/rpython/bin/rpython src/main_rpython.py

.pysom-bc-int: &PYSOM_BC_INT_BUILD
    path: /home/gitlab-runner/.local/PySOM
    executable: som-bc-interp
    build:
        - |
          export PATH=/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:$PATH
          git fetch --all && git checkout -f $SHA && git submodule update -f --init --recursive
          SOM_INTERP=BC /home/gitlab-runner/.local/pypy2.7-v7.3.9-src/rpython/bin/rpython src/main_rpython.py

runs:
  max_invocation_time: 42000

reporting:
    rebenchdb:
        # this url needs to point to the API endpoint
        db_url: https://rebench.stefan-marr.de/rebenchdb
        repo_url: https://github.com/smarr/awfy-runs
        record_all: true # make sure everything is recorded
        project_name: Are We Fast Yet

# definition of benchmark suites
benchmark_suites:
    som-steady:
        gauge_adapter: RebenchLog
        command: " -cp .:Core:CD:DeltaBlue:Havlak:Json:NBody:Richards:/home/gitlab-runner/.local/TruffleSOM/Smalltalk Harness.som  %(benchmark)s %(iterations)s "
        iterations: *FAST_VM ## the number iterations measured
        location: awfy/benchmarks/SOM
        benchmarks: &BENCHMARKS
            - DeltaBlue:
                extra_args: 10000
                codespeed_name: "[peak] DeltaBlue"
            - Richards:
                extra_args: 40
                codespeed_name: "[peak] Richards"
            - Json:
                extra_args: 80
                codespeed_name: "[peak] Json"
            - CD:
                extra_args: 250
                codespeed_name: "[peak] CD"
            - Havlak:
                extra_args: 1500
                codespeed_name: "[peak] Havlak"

            - Bounce:
                extra_args: 4000
                codespeed_name: "[peak] Bounce"
            - List:
                extra_args: 1000
                codespeed_name: "[peak] List"
            - Mandelbrot:
                extra_args: 750
                codespeed_name: "[peak] Mandelbrot"
            - NBody:
                extra_args: 250000
                codespeed_name: "[peak] NBody"
            - Permute:
                extra_args: 1500
                codespeed_name: "[peak] Permute"
            - Queens:
                extra_args: 1000
                codespeed_name: "[peak] Queens"
            - Sieve:
                extra_args: 2500
                codespeed_name: "[peak] Sieve"
            - Storage:
                extra_args: 1000
                codespeed_name: "[peak] Storage"
            - Towers:
                extra_args: 1000
                codespeed_name: "[peak] Towers"

    som-interp:
        gauge_adapter: RebenchLog
        command: " -cp .:Core:CD:DeltaBlue:Havlak:Json:NBody:Richards:/home/gitlab-runner/.local/TruffleSOM/Smalltalk Harness.som  %(benchmark)s %(iterations)s "
        iterations: *VERY_SLOW_VM ## the number iterations measured
        invocations: 100
        location: awfy/benchmarks/SOM
        benchmarks: *BENCHMARKS

    java-steady:
        gauge_adapter: RebenchLog
        location: awfy/benchmarks/Java
        command: " -cp benchmarks17.jar Harness %(benchmark)s %(iterations)s "
        iterations: *FAST_VM ## the number iterations measured
        benchmarks: *BENCHMARKS
        build:
          - |
            export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64/
            ant clean; ant jar
            mv benchmarks.jar benchmarks17.jar

    java-interp:
        gauge_adapter: RebenchLog
        location: awfy/benchmarks/Java
        command: " -cp benchmarks17.jar Harness %(benchmark)s %(iterations)s "
        iterations: *VERY_SLOW_VM ## the number iterations measured
        invocations: 10
        benchmarks: *BENCHMARKS
        build:
          - |
            export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64/
            ant clean; ant jar
            mv benchmarks.jar benchmarks17.jar

    java8-steady:
        gauge_adapter: RebenchLog
        location: awfy/benchmarks/Java
        command: " -cp benchmarks8.jar Harness %(benchmark)s %(iterations)s "
        iterations: *FAST_VM ## the number iterations measured
        benchmarks: *BENCHMARKS
        build:
          - |
            export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64/
            ant clean; ant jar
            mv benchmarks.jar benchmarks8.jar

    java8-interp:
        gauge_adapter: RebenchLog
        location: awfy/benchmarks/Java
        command: " -cp benchmarks8.jar Harness %(benchmark)s %(iterations)s "
        iterations: *VERY_SLOW_VM ## the number iterations measured
        benchmarks: *BENCHMARKS
        build:
          - |
            export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64/
            ant clean; ant jar
            mv benchmarks.jar benchmarks8.jar

    java20-steady:
        gauge_adapter: RebenchLog
        location: awfy/benchmarks/Java
        command: " -cp benchmarks20.jar Harness %(benchmark)s %(iterations)s "
        iterations: *FAST_VM ## the number iterations measured
        benchmarks: *BENCHMARKS
        build:
          - |
            export JAVA_HOME=/usr/lib/jvm/temurin-20-jdk-amd64/
            ant clean; ant jar
            mv benchmarks.jar benchmarks20.jar

    java20-interp:
        gauge_adapter: RebenchLog
        location: awfy/benchmarks/Java
        command: " -cp benchmarks20.jar Harness %(benchmark)s %(iterations)s "
        iterations: *VERY_SLOW_VM ## the number iterations measured
        invocations: 10
        benchmarks: *BENCHMARKS
        build:
          - |
            export JAVA_HOME=/usr/lib/jvm/temurin-20-jdk-amd64/
            ant clean; ant jar
            mv benchmarks.jar benchmarks20.jar

    java-native:
        gauge_adapter: RebenchLog
        location: awfy/benchmarks/Java
        command: " %(benchmark)s %(iterations)s "
        iterations: *FAST_VM ## the number iterations measured
        benchmarks: *BENCHMARKS
        build:
          - |
            export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64/
            ant clean; ant jar
            /home/gitlab-runner/.local/graalvm-ee-java17-22.3.0/bin/native-image -cp benchmarks.jar Harness benchmarks

    js-jit:
        gauge_adapter: RebenchLog
        location: awfy/benchmarks/JavaScript
        command: "harness.js %(benchmark)s %(iterations)s "
        iterations: *FAST_VM
        benchmarks: *BENCHMARKS

    js-interp:
        gauge_adapter: RebenchLog
        location: awfy/benchmarks/JavaScript
        command: "harness.js %(benchmark)s %(iterations)s "
        iterations: *VERY_SLOW_VM
        invocations: 10
        benchmarks: *BENCHMARKS

executors:
    # TSOM-AST-HOTSPOT-JIT ---------------------------------------------

    TruffleSOM-ast-HotspotCE-jit:
        env:
            SHA: *SHA_TSOM_BASELINE
        args: -Dsom.interp=AST
        <<: *TSOM_HOTSPOT_BUILD

    TruffleSOM-ast-HotspotCE-jit-no-lower-prims:
        env:
            SHA: *SHA_TSOM_NO_LOWER_PRIMS
        args: -Dsom.interp=AST
        <<: *TSOM_HOTSPOT_BUILD

    TruffleSOM-ast-HotspotCE-jit-no-inline-caching:
        env:
            SHA: *SHA_TSOM_NO_INLINE_CACHING
        args: -Dsom.interp=AST
        <<: *TSOM_HOTSPOT_BUILD

    TruffleSOM-ast-HotspotCE-jit-no-inlining-control-structs:
        env:
            SHA: *SHA_TSOM_NO_INLINING_CONTROL_STRUCTS
        args: -Dsom.interp=AST
        <<: *TSOM_HOTSPOT_BUILD

    TruffleSOM-ast-HotspotCE-jit-no-global-caching:
        env:
            SHA: *SHA_TSOM_NO_GLOBAL_CACHING
        args: -Dsom.interp=AST
        <<: *TSOM_HOTSPOT_BUILD

    TruffleSOM-ast-HotspotCE-jit-no-supernodes:
        env:
            SHA: *SHA_TSOM_NO_SUPERNODES
        args: -Dsom.interp=AST
        <<: *TSOM_HOTSPOT_BUILD

    # TSOM-BC-HOTSPOT-JIT ---------------------------------------------

    TruffleSOM-bc-HotspotCE-jit:
        env:
            SHA: *SHA_TSOM_BASELINE
        args: -Dsom.interp=BC
        <<: *TSOM_HOTSPOT_BUILD

    TruffleSOM-bc-HotspotCE-jit-no-lower-prims:
        env:
            SHA: *SHA_TSOM_NO_LOWER_PRIMS
        args: -Dsom.interp=BC
        <<: *TSOM_HOTSPOT_BUILD
    
    TruffleSOM-bc-HotspotCE-jit-no-inline-caching:
        env:
            SHA: *SHA_TSOM_NO_INLINE_CACHING
        args: -Dsom.interp=BC
        <<: *TSOM_HOTSPOT_BUILD

    TruffleSOM-bc-HotspotCE-jit-no-inlining-control-structs:
        env:
            SHA: *SHA_TSOM_NO_INLINING_CONTROL_STRUCTS
        args: -Dsom.interp=BC
        <<: *TSOM_HOTSPOT_BUILD

    TruffleSOM-bc-HotspotCE-jit-no-global-caching:
        env:
            SHA: *SHA_TSOM_NO_GLOBAL_CACHING
        args: -Dsom.interp=BC
        <<: *TSOM_HOTSPOT_BUILD

    TruffleSOM-bc-HotspotCE-jit-no-quickening:
        env:
            SHA: *SHA_TSOM_NO_QUICKENING
        args: -Dsom.interp=BC
        <<: *TSOM_HOTSPOT_BUILD

    TruffleSOM-bc-HotspotCE-jit-no-superinstructions:
        env:
            SHA: *SHA_TSOM_NO_SUPERINSTRUCTIONS
        args: -Dsom.interp=BC
        <<: *TSOM_HOTSPOT_BUILD

    # TSOM-AST-NATIVE-CE-INT ---------------------------------------------

    TruffleSOM-ast-NativeCE-int:
        env:
            SHA: *SHA_TSOM_BASELINE
        executable: som-native-interp-ast
        <<: *TSOM_NATIVE_AST_BUILD

    TruffleSOM-ast-NativeCE-int-no-lower-prims:
        env:
            SHA: *SHA_TSOM_NO_LOWER_PRIMS
            OPTIM: "no-lower-prims"
        executable: som-native-interp-ast-no-lower-prims
        <<: *TSOM_NATIVE_AST_BUILD

    TruffleSOM-ast-NativeCE-int-no-inline-caching:
        env:
            SHA: *SHA_TSOM_NO_INLINE_CACHING
            OPTIM: "no-inline-caching"
        executable: som-native-interp-ast-no-inline-caching
        <<: *TSOM_NATIVE_AST_BUILD

    TruffleSOM-ast-NativeCE-int-no-inlining-control-structs:
        env:
            SHA: *SHA_TSOM_NO_INLINING_CONTROL_STRUCTS
            OPTIM: "no-inlining-control-structs"
        executable: som-native-interp-ast-no-inlining-control-structs
        <<: *TSOM_NATIVE_AST_BUILD

    TruffleSOM-ast-NativeCE-int-no-global-caching:
        env:
            SHA: *SHA_TSOM_NO_GLOBAL_CACHING
            OPTIM: "no-global-caching"
        executable: som-native-interp-ast-no-global-caching
        <<: *TSOM_NATIVE_AST_BUILD

    TruffleSOM-ast-NativeCE-int-no-supernodes:
        env:
            SHA: *SHA_TSOM_NO_SUPERNODES
            OPTIM: "no-supernodes"
        executable: som-native-interp-ast-no-supernodes
        <<: *TSOM_NATIVE_AST_BUILD

    # TSOM-BC-NATIVE-CE-INT ---------------------------------------------

    TruffleSOM-bc-NativeCE-int:
        env:
            SHA: *SHA_TSOM_BASELINE
        executable: som-native-interp-bc         
        <<: *TSOM_NATIVE_BC_BUILD

    TruffleSOM-bc-NativeCE-int-no-lower-prims:
        env:
            SHA: *SHA_TSOM_NO_LOWER_PRIMS
            OPTIM: "no-lower-prims"
        executable: som-native-interp-bc-no-lower-prims
        <<: *TSOM_NATIVE_BC_BUILD

    TruffleSOM-bc-NativeCE-int-no-inline-caching:
        env:
            SHA: *SHA_TSOM_NO_INLINE_CACHING
            OPTIM: "no-inline-caching"
        executable: som-native-interp-bc-no-inline-caching
        <<: *TSOM_NATIVE_BC_BUILD

    TruffleSOM-bc-NativeCE-int-no-inlining-control-structs:
        env:
            SHA: *SHA_TSOM_NO_INLINING_CONTROL_STRUCTS
            OPTIM: "no-inlining-control-structs"
        executable: som-native-interp-bc-no-inlining-control-structs
        <<: *TSOM_NATIVE_BC_BUILD

    TruffleSOM-bc-NativeCE-int-no-global-caching:
        env:
            SHA: *SHA_TSOM_NO_GLOBAL_CACHING
            OPTIM: "no-global-caching"
        executable: som-native-interp-bc-no-global-caching
        <<: *TSOM_NATIVE_BC_BUILD

    TruffleSOM-bc-NativeCE-int-no-quickening:
        env:
            SHA: *SHA_TSOM_NO_QUICKENING
            OPTIM: "no-quickening"
        executable: som-native-interp-bc-no-quickening
        <<: *TSOM_NATIVE_BC_BUILD

    TruffleSOM-bc-NativeCE-int-no-superinstructions:
        env:
            SHA: *SHA_TSOM_NO_SUPERINSTRUCTIONS
            OPTIM: "no-superinstructions"
        executable: som-native-interp-bc-no-superinstructions
        <<: *TSOM_NATIVE_BC_BUILD

    # PYSOM-AST-JIT ---------------------------------------------

    PySOM-ast-jit:
        env:
            SHA: *SHA_PYSOM_BASELINE
        <<: *PYSOM_AST_JIT_BUILD

    PySOM-ast-jit-no-lower-prims:
        env:
            SHA: *SHA_PYSOM_NO_LOWER_PRIMS
        <<: *PYSOM_AST_JIT_BUILD

    PySOM-ast-jit-no-inline-caching:
        env:
            SHA: *SHA_PYSOM_NO_INLINE_CACHING
        <<: *PYSOM_AST_JIT_BUILD

    PySOM-ast-jit-no-inlining-control-structs:
        env:
            SHA: *SHA_PYSOM_NO_INLINING_CONTROL_STRUCTS
        <<: *PYSOM_AST_JIT_BUILD

    PySOM-ast-jit-no-global-caching:
        env:
            SHA: *SHA_PYSOM_NO_GLOBAL_CACHING
        <<: *PYSOM_AST_JIT_BUILD

    # PYSOM-BC-JIT ---------------------------------------------

    PySOM-bc-jit:
        env:
            SHA: *SHA_PYSOM_BASELINE
        <<: *PYSOM_BC_JIT_BUILD

    PySOM-bc-jit-no-lower-prims:
        env:
            SHA: *SHA_PYSOM_NO_LOWER_PRIMS
        <<: *PYSOM_BC_JIT_BUILD

    PySOM-bc-jit-no-inline-caching:
        env:
            SHA: *SHA_PYSOM_NO_INLINE_CACHING
        <<: *PYSOM_BC_JIT_BUILD

    PySOM-bc-jit-no-inlining-control-structs:
        env:
            SHA: *SHA_PYSOM_NO_INLINING_CONTROL_STRUCTS
        <<: *PYSOM_BC_JIT_BUILD

    PySOM-bc-jit-no-global-caching:
        env:
            SHA: *SHA_PYSOM_NO_GLOBAL_CACHING
        <<: *PYSOM_BC_JIT_BUILD

    PySOM-bc-jit-no-quickening:
        env:
            SHA: *SHA_PYSOM_NO_QUICKENING
        <<: *PYSOM_BC_JIT_BUILD

    PySOM-bc-jit-no-superinstructions:
        env:
            SHA: *SHA_PYSOM_NO_SUPERINSTRUCTIONS
        <<: *PYSOM_BC_JIT_BUILD

    # PYSOM-AST-INT ---------------------------------------------

    PySOM-ast-int:
        env:
            SHA: *SHA_PYSOM_BASELINE
        <<: *PYSOM_AST_INT_BUILD

    PySOM-ast-int-no-lower-prims:
        env:
            SHA: *SHA_PYSOM_NO_LOWER_PRIMS
        <<: *PYSOM_AST_INT_BUILD

    PySOM-ast-int-no-inline-caching:
        env:
            SHA: *SHA_PYSOM_NO_INLINE_CACHING
        <<: *PYSOM_AST_INT_BUILD

    PySOM-ast-int-no-inlining-control-structs:
        env:
            SHA: *SHA_PYSOM_NO_INLINING_CONTROL_STRUCTS
        <<: *PYSOM_AST_INT_BUILD

    PySOM-ast-int-no-global-caching:
        env:
            SHA: *SHA_PYSOM_NO_GLOBAL_CACHING
        <<: *PYSOM_AST_INT_BUILD

    # PYSOM-BC-INT ---------------------------------------------

    PySOM-bc-int:
        env:
            SHA: *SHA_PYSOM_BASELINE
        <<: *PYSOM_BC_INT_BUILD

    PySOM-bc-int-no-lower-prims:
        env:
            SHA: *SHA_PYSOM_NO_LOWER_PRIMS
        <<: *PYSOM_BC_INT_BUILD

    PySOM-bc-int-no-inline-caching:
        env:
            SHA: *SHA_PYSOM_NO_INLINE_CACHING
        <<: *PYSOM_BC_INT_BUILD

    PySOM-bc-int-no-inlining-control-structs:
        env:
            SHA: *SHA_PYSOM_NO_INLINING_CONTROL_STRUCTS
        <<: *PYSOM_BC_INT_BUILD

    PySOM-bc-int-no-global-caching:
        env:
            SHA: *SHA_PYSOM_NO_GLOBAL_CACHING
        <<: *PYSOM_BC_INT_BUILD

    PySOM-bc-int-no-quickening:
        env:
            SHA: *SHA_PYSOM_NO_QUICKENING
        <<: *PYSOM_BC_INT_BUILD

    PySOM-bc-int-no-superinstructions:
        env:
            SHA: *SHA_PYSOM_NO_SUPERINSTRUCTIONS
        <<: *PYSOM_BC_INT_BUILD

    # JAVA ---------------------------------------------

    Java-native:
        path: awfy/benchmarks/Java
        executable: benchmarks

    Java-int:
        path: /usr/lib/jvm/java-17-openjdk-amd64/bin/
        executable: java
        args: -Xint
    Java-C2-jit:
        path: /usr/lib/jvm/java-17-openjdk-amd64/bin/
        executable: java
    Java8-int:
        path: /usr/lib/jvm/java-8-openjdk-amd64/bin/
        executable: java
        args: -Xint
    Java8-C2-jit:
        path: /usr/lib/jvm/java-8-openjdk-amd64/bin/
        executable: java
    Java20-int:
        path: /usr/lib/jvm/temurin-20-jdk-amd64/bin/
        executable: java
        args: -Xint
    Java20-C2-jit:
        path: /usr/lib/jvm/temurin-20-jdk-amd64/bin/
        executable: java

    # NODE ---------------------------------------------

    Node-jit:
        executable: node
    Node-int:
        executable: node
        args: --jitless


experiments:
    java:
        executions:
            - Java-native:
                 suites: [java-native]
            - Java-C2-jit:
                 suites: [java-steady]
            - Java-int:
                 suites: [java-interp]
            - Java8-C2-jit:
                 suites: [java8-steady]
            - Java8-int:
                 suites: [java8-interp]
            - Java20-C2-jit:
                 suites: [java20-steady]
            - Java20-int:
                 suites: [java20-interp]

    som:
        executions:
            - TruffleSOM-ast-HotspotCE-jit:
                suites: [som-steady]
            - TruffleSOM-ast-HotspotCE-jit-no-lower-prims:
                suites: [som-steady]
            - TruffleSOM-ast-HotspotCE-jit-no-inline-caching:
                suites: [som-steady]
            - TruffleSOM-ast-HotspotCE-jit-no-inlining-control-structs:
                suites: [som-steady]
            - TruffleSOM-ast-HotspotCE-jit-no-global-caching:
                suites: [som-steady]
            - TruffleSOM-ast-HotspotCE-jit-no-supernodes:
                suites: [som-steady]

            - TruffleSOM-bc-HotspotCE-jit:
                suites: [som-steady]
            - TruffleSOM-bc-HotspotCE-jit-no-lower-prims:
                suites: [som-steady]
            - TruffleSOM-bc-HotspotCE-jit-no-inline-caching:
                suites: [som-steady]
            - TruffleSOM-bc-HotspotCE-jit-no-inlining-control-structs:
                suites: [som-steady]
            - TruffleSOM-bc-HotspotCE-jit-no-global-caching:
                suites: [som-steady]
            - TruffleSOM-bc-HotspotCE-jit-no-quickening:
                suites: [som-steady]
            - TruffleSOM-bc-HotspotCE-jit-no-superinstructions:
                suites: [som-steady]

            - TruffleSOM-ast-NativeCE-int:
                suites: [som-interp]
            - TruffleSOM-ast-NativeCE-int-no-lower-prims:
                suites: [som-interp]
            - TruffleSOM-ast-NativeCE-int-no-inline-caching:
                suites: [som-interp]
            - TruffleSOM-ast-NativeCE-int-no-inlining-control-structs:
                suites: [som-interp]
            - TruffleSOM-ast-NativeCE-int-no-global-caching:
                suites: [som-interp]
            - TruffleSOM-ast-NativeCE-int-no-supernodes:
                suites: [som-interp]

            - TruffleSOM-bc-NativeCE-int:
                suites: [som-interp]
            - TruffleSOM-bc-NativeCE-int-no-lower-prims:
                suites: [som-interp]
            - TruffleSOM-bc-NativeCE-int-no-inline-caching:
                suites: [som-interp]
            - TruffleSOM-bc-NativeCE-int-no-inlining-control-structs:
                suites: [som-interp]
            - TruffleSOM-bc-NativeCE-int-no-global-caching:
                suites: [som-interp]
            - TruffleSOM-bc-NativeCE-int-no-quickening:
                suites: [som-interp]
            - TruffleSOM-bc-NativeCE-int-no-superinstructions:
                suites: [som-interp]

            - PySOM-ast-jit:
                suites: [som-steady]
            - PySOM-ast-jit-no-lower-prims:
                suites: [som-steady]
            - PySOM-ast-jit-no-inline-caching:
                suites: [som-steady]
            - PySOM-ast-jit-no-inlining-control-structs:
                suites: [som-steady]
            - PySOM-ast-jit-no-global-caching:
                suites: [som-steady]

            - PySOM-ast-int:
                suites: [som-interp]
            - PySOM-ast-int-no-lower-prims:
                suites: [som-interp]
            - PySOM-ast-int-no-inline-caching:
                suites: [som-interp]
            - PySOM-ast-int-no-inlining-control-structs:
                suites: [som-interp]
            - PySOM-ast-int-no-global-caching:
                suites: [som-interp]

            - PySOM-bc-jit:
                suites: [som-steady]
            - PySOM-bc-jit-no-lower-prims:
                suites: [som-steady]
            - PySOM-bc-jit-no-inline-caching:
                suites: [som-steady]
            - PySOM-bc-jit-no-inlining-control-structs:
                suites: [som-steady]
            - PySOM-bc-jit-no-global-caching:
                suites: [som-steady]
            - PySOM-bc-jit-no-quickening:
                suites: [som-steady]
            - PySOM-bc-jit-no-superinstructions:
                suites: [som-steady]

            - PySOM-bc-int:
                suites: [som-interp]
            - PySOM-bc-int-no-lower-prims:
                suites: [som-interp]
            - PySOM-bc-int-no-inline-caching:
                suites: [som-interp]
            - PySOM-bc-int-no-inlining-control-structs:
                suites: [som-interp]
            - PySOM-bc-int-no-global-caching:
                suites: [som-interp]
            - PySOM-bc-int-no-quickening:
                suites: [som-interp]
            - PySOM-bc-int-no-superinstructions:
                suites: [som-interp]

    js:
        executions:
            - Node-jit:
                suites: [js-jit]
            - Node-int:
                suites: [js-interp]